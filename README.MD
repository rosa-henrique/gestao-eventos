<div align="center">

[![Build](https://github.com/rosa-henrique/gestao-eventos/actions/workflows/build.yml/badge.svg)](https://github.com/rosa-henrique/gestao-eventos/actions/workflows/build.yml)
[![GitHub license](./assets/license.svg)](https://github.com/seu-usuario/seu-projeto/blob/main/LICENSE)  
[![codecov](https://codecov.io/gh/rosa-henrique/gestao-eventos/graph/badge.svg?token=GYB8E8MWV3)](https://codecov.io/gh/rosa-henrique/gestao-eventos)

---  

Gest√£o eventos

---  

</div>

# Vis√£o Geral

O **EventFlow** √© um sistema de gest√£o de eventos onde os usu√°rios podem:
- **Organizar eventos** (criar, editar, cancelar).
- **Comprar ingressos** (com valida√ß√£o de disponibilidade e pagamentos integrados).

## Arquitetura e Padr√µes
- **Domain-Driven Design (DDD)**: Dom√≠nio rico com entidades, aggregates e domain events para garantir consist√™ncia eventual.
- **Clean Architecture**: Separa√ß√£o clara em camadas (Domain, Application, Infrastructure, Presentation).
- **CQRS**: Segrega√ß√£o entre comandos (escrita) e consultas (leitura) usando MediatR.
- **Domain Events**: Para a√ß√µes ass√≠ncronas (ex: enviar e-mail ap√≥s compra de ingresso).

## Tecnologias Principais
- **Backend**: .NET 8, Entity Framework Core (PostgreSQL), MediatR, ErrorOr (para tratamento de erros).
- **Monitoramento**: Serilog (logs estruturados) + Seq (visualiza√ß√£o).
- **Testes**: XUnit (unit/integration) + NSubstitute (mocks).

```shell
# Exemplo de instala√ß√£o (ajuste conforme seu projeto):
dotnet run --project src/GestaoEventos.Api
```

# Funcionalidades üöÄ

## Autentica√ß√£o üîê
- **Criar usu√°rio**: Registro inicial no sistema.
- **Gerar token JWT**: Autentica√ß√£o segura para acesso √†s funcionalidades.

```shell
# Exemplo: Gerar token
POST /auth/login
{
    "email": "usuario@exemplo.com",
    "senha": ""
}
```

## Eventos üé™
### Escrita (Comandos)
- **Adicionar evento**: Criar novos eventos.
- **Adicionar sess√£o**: Vincular hor√°rios a eventos.
- **Adicionar ingresso**: Definir tipos de ingressos.
- **Alterar/Cancelar evento**: Atualizar detalhes ou status.
- **Remover sess√£o/ingresso**: Exclus√£o de registros.

```shell
# Exemplo: Criar evento
POST /eventos
{
  "nome": "string",
  "dataHoraInicio": "2025-04-25T12:00:00.000Z",
  "dataHoraFim": "2025-04-29T20:00:00.000Z",
  "localizacao": "string",
  "capacidadeMaxima": 100
}
```
### Leitura (Consultas)
- **Buscar evento por ID**: Detalhes espec√≠ficos.
- **Listar eventos**: Listar todos eventos disponiveis.
- **Buscar sess√µes/ingressos**: Relacionados a um evento.
```shell
# Exemplo: Listar eventos
GET /eventos
```

## Compras üéüÔ∏è
- **Comprar ingresso**: Vinculado a uma sess√£o espec√≠fica.
```shell
# Exemplo: Comprar ingresso
POST /compras/ingressos/:sessaoId/
[
	{
		"ingressoId": "59c907d2-d47b-4338-a89d-6ba9ac1a1940",
		"quantidade": 3
	},
	{
		"ingressoId": "ea58d33e-682e-4411-94ba-9d09f664611c",
		"quantidade": 3
	}
]
```

# Como executar:
#### 1. Iniciar os servi√ßos
```shell
docker-compose up -d --build
```

#### 2. Executar Migrations
```shell
# Dentro do container (recomendado para produ√ß√£o)
docker exec -it gestao_eventos_api bash -c "cd /app/src/GestaoEventos.Infrastructure && dotnet ef database update --startup-project ../GestaoEventos.Api"

# Localmente (desenvolvimento)
cd src/GestaoEventos.Infrastructure
dotnet ef database update --startup-project ../GestaoEventos.Api
```

### Servi√ßos dispon√≠veis:
| Servi√ßo  | URL                          | Portas      |
|----------|------------------------------|-------------|
| PostgreSQL | `host=localhost;port=5432` | 5432        |
| Seq (Logs) | http://localhost:5341      | 5341, 8081  |
| API       | http://localhost:5271      | 5271, 7211  |

# Demais informa√ß√µes
- [Instru√ß√µes de como rodar local e preparar ambiente para novas feature](./run.MD)
